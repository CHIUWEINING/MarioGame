{"version":3,"sources":["assets\\Script\\Player.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Player extends cc.Component {\r\n    \r\n    @property(cc.Node)\r\n    gameMgr: cc.Node = null;\r\n    \r\n    @property()\r\n    playerSpeed: number = 150;\r\n    @property(cc.SpriteFrame)\r\n    big_sprite:cc.SpriteFrame=null;\r\n    @property(cc.SpriteFrame)\r\n    small_sprite:cc.SpriteFrame=null;\r\n    @property({type:cc.AudioClip})\r\n    Jump: cc.AudioClip = null;\r\n    @property({type:cc.AudioClip})\r\n    powerUp: cc.AudioClip = null;\r\n    @property({type:cc.AudioClip})\r\n    powerDown: cc.AudioClip = null;\r\n    @property({type:cc.AudioClip})\r\n    loseLife: cc.AudioClip = null;\r\n    @property(cc.Prefab)\r\n    score:cc.Prefab=null;\r\n\r\n    private leftDown: boolean = false;\r\n    private upDown: boolean = false;\r\n    private rightDown: boolean = false;\r\n    private idleFrame: cc.SpriteFrame = null;\r\n    private moveDir = 0;\r\n    private onGround: boolean =true;\r\n    private anim: cc.Animation = null;\r\n    private fallDown:boolean=false;\r\n    private changing:number=0;\r\n    private Die:boolean=false;\r\n    private grown:boolean=false;\r\n    private just_change:boolean=false;\r\n    private win:boolean=false;\r\n    \r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n    start () {\r\n        //console.log(this.gameMgr.getComponent('GameMgr').pause);\r\n        this.anim=this.getComponent(cc.Animation);\r\n        this.idleFrame = this.getComponent(cc.Sprite).spriteFrame;\r\n    }\r\n    update(dt)\r\n    {\r\n        if(!this.gameMgr.getComponent('GameMgr').pause){\r\n            this.node.x += this.playerSpeed * this.moveDir * dt;\r\n            if(this.moveDir>0)this.node.scaleX=1;\r\n            else if(this.moveDir<0)this.node.scaleX=-1;\r\n            if(this.getComponent(cc.RigidBody).linearVelocity.y != 0){\r\n                this.fallDown = true;\r\n            }else{\r\n                this.fallDown=false;\r\n            }\r\n        }\r\n        if(this.node.x>=4296)this.gameMgr.getComponent('GameMgr').Win();\r\n        this.playAnimation();\r\n    }\r\n    onBeginContact(contact, self, other) {\r\n        if(!this.Die){\r\n            if(other.tag==1){//ground\r\n                this.onGround= true;\r\n                this.fallDown=false;\r\n            }else if(other.tag==2){//coin\r\n                console.log('touch');\r\n                contact.disabled=true;\r\n                this.gameMgr.getComponent('GameMgr').updateCoin();\r\n            }else if(other.tag==3){//mushroom\r\n                //console.log('here');\r\n                other.node.destroy();\r\n                this.gameMgr.getComponent('GameMgr').grow();\r\n                var score=cc.instantiate(this.score);\r\n                score.setPosition(12,15);\r\n                cc.find('Canvas/player').addChild(score);\r\n                this.scheduleOnce(function(){\r\n                    score.destroy();\r\n                },1);\r\n            }else if(other.tag==8){\r\n                if(!this.just_change)this.gameMgr.getComponent('GameMgr').hurt();\r\n            }\r\n            else if(other.tag==0 || other.tag==6){//box\r\n                this.onGround=true;\r\n            }else if(this.just_change)contact.disabled=true;\r\n        }else{\r\n            contact.disabled=true;\r\n            this.scheduleOnce(function(){\r\n                contact.disabled=false;\r\n            },4);\r\n        }\r\n    }\r\n    onEndContact(contact,self,other){\r\n        if(other.tag==2)contact.disabled=false;\r\n    }\r\n    jump(){\r\n        this.onGround = false;\r\n        cc.audioEngine.playEffect(this.Jump,false);\r\n        this.getComponent(cc.RigidBody).linearVelocity = cc.v2(0,220);\r\n    }\r\n    playerMove(moveDir: number)\r\n    {\r\n        this.moveDir = moveDir;\r\n    }\r\n    onKeyDown(event)\r\n    {\r\n        switch(event.keyCode)\r\n        {\r\n            case cc.macro.KEY.left:\r\n                this.leftDown = true;\r\n                if(!this.Die && !this.win)this.playerMove(-1);\r\n                break;\r\n            case cc.macro.KEY.right:\r\n                this.rightDown = true;\r\n                if(!this.Die && !this.win)this.playerMove(1);\r\n                break;\r\n            case cc.macro.KEY.up:\r\n                this.upDown=true;\r\n                if(this.onGround && this.upDown && !this.Die && !this.win){\r\n                    this.jump();\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    onKeyUp(event)\r\n    {\r\n        switch(event.keyCode)\r\n        {\r\n            case cc.macro.KEY.left:\r\n                this.leftDown = false;\r\n                if(this.rightDown && !this.Die && !this.win)\r\n                    this.playerMove(1);\r\n                else\r\n                    this.playerMove(0);\r\n                break;\r\n            case cc.macro.KEY.right:\r\n                this.rightDown = false;\r\n                if(this.leftDown && !this.Die && !this.win)\r\n                    this.playerMove(-1);\r\n                else\r\n                    this.playerMove(0);\r\n                break;\r\n            case cc.macro.KEY.up:\r\n                this.upDown=false;\r\n        }\r\n    }\r\n    playAnimation(){\r\n        if(this.win){\r\n            if(!this.anim.getAnimationState('player_win').isPlaying){\r\n                this.anim.play('player_win');\r\n            }\r\n        }\r\n        else if(this.gameMgr.getComponent('GameMgr').pause && this.Die){\r\n            if(!this.anim.getAnimationState('player_die').isPlaying){\r\n                this.anim.play('player_die');\r\n                this.scheduleOnce(function(){\r\n                    this.anim.stop();\r\n                },2)\r\n            }\r\n        }else if(this.gameMgr.getComponent('GameMgr').pause && this.changing==1){\r\n            if(!this.anim.getAnimationState('player_grow').isPlaying){\r\n                this.anim.play('player_grow');\r\n            }\r\n        }else if(this.gameMgr.getComponent('GameMgr').pause && this.changing==2){\r\n            if(!this.anim.getAnimationState('player_weak').isPlaying){\r\n                this.anim.play('player_weak');\r\n            }\r\n        }\r\n        else if(this.fallDown == true){\r\n            if(!this.grown && !this.anim.getAnimationState('fall').isPlaying){\r\n                this.anim.play('fall');\r\n            }else if(this.grown && !this.anim.getAnimationState('fall1').isPlaying){\r\n                this.anim.play('fall1');\r\n            }\r\n            /*if(this.moveDir==0 && !this.anim.getAnimationState('fall_front').isPlaying){\r\n                this.anim.play(\"fall_front\");\r\n            }else if(this.moveDir!=0 && !this.anim.getAnimationState('fall_side').isPlaying){\r\n                this.anim.play('fall_side');\r\n            }*/\r\n        }\r\n        else{\r\n            if(this.moveDir == 0)\r\n            {\r\n                this.getComponent(cc.Sprite).spriteFrame = this.idleFrame;\r\n                // ========== TODO ==========\r\n                // 1. Stop the animation which is playing\r\n                this.anim.stop();\r\n            }\r\n\r\n            // ========== TODO ==========\r\n            // 1. Play walk animation (Checked the walk animation is playing or not)\r\n            else {\r\n                if(!this.grown && !this.anim.getAnimationState('player_move').isPlaying){\r\n                    this.anim.play('player_move');\r\n                }else if(this.grown && !this.anim.getAnimationState('player_move1').isPlaying){\r\n                    this.anim.play('player_move1');\r\n                }\r\n            }\r\n        }\r\n    }\r\n    growUp(){\r\n        this.changing=1;\r\n        cc.audioEngine.playEffect(this.powerUp,false);\r\n        this.getComponent(cc.RigidBody).gravityScale=0;\r\n        this.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0);\r\n        this.scheduleOnce(function(){\r\n            this.getComponent(cc.RigidBody).gravityScale=2;\r\n            this.getComponent(cc.RigidBody).linearVelocity=cc.v2();\r\n            this.changing=0;\r\n            this.idleFrame=this.big_sprite;\r\n            this.getComponent(cc.Sprite).spriteFrame=this.big_sprite;\r\n            this.grown=true;\r\n        },1);\r\n    }\r\n    die(){\r\n        this.jump();\r\n        this.gameMgr.getComponent('GameMgr').pause=true;\r\n        this.Die=true;\r\n        cc.audioEngine.pauseMusic();\r\n        cc.audioEngine.playEffect(this.loseLife,false);\r\n        this.scheduleOnce(function(){\r\n            this.Die=false;\r\n        },4);\r\n    }\r\n    hurt(){\r\n        this.changing=2;\r\n        cc.audioEngine.playEffect(this.powerDown,false);\r\n        this.getComponent(cc.RigidBody).gravityScale=0;\r\n        this.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0);\r\n        this.scheduleOnce(function(){\r\n            this.changing=0;\r\n            this.getComponent(cc.RigidBody).gravityScale=2;\r\n            this.getComponent(cc.RigidBody).linearVelocity=cc.v2();\r\n            this.idleFrame=this.small_sprite;\r\n            this.getComponent(cc.Sprite).spriteFrame=this.small_sprite;\r\n            this.grown=false;\r\n            this.just_change=true;\r\n            this.scheduleOnce(function(){\r\n                this.just_change=false;\r\n            },3)\r\n        },1);\r\n    }\r\n    Win(){\r\n        this.win=true;\r\n    }\r\n    // update (dt) {}\r\n}\r\n"]}