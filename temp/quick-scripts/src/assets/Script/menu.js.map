{"version":3,"sources":["assets\\Script\\menu.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAE5E,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAkC,wBAAY;IAA9C;QAAA,qEA6FC;QA3FG,SAAG,GAAiB,IAAI,CAAC;QACzB,eAAS,GAAQ,EAAE,CAAC;QACpB,UAAI,GAAQ,CAAC,CAAC;QACd,WAAK,GAAQ,CAAC,CAAC;QACf,YAAM,GAAS,KAAK,CAAC;QACrB,YAAM,GAAS,KAAK,CAAC;QACrB,UAAI,GAAQ,CAAC,CAAC;;QAoFd,iBAAiB;IACrB,CAAC;IApFG,qBAAM,GAAN;QAAA,iBAoBA;QAnBI,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAC,IAAI,CAAC,CAAC;QACxC,IAAI,GAAG,GAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACrD,IAAI,IAAI,GAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAChB,IAAI,IAAI,GAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAC,IAAI,GAAC,MAAM,CAAC,CAAC;QACzD,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACZ,IAAI,GAAG,GAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAC,IAAI,CAAC,CAAC;QACjD,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;YAC5B,8BAA8B;YAC9B,KAAI,CAAC,SAAS,GAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;YACnC,KAAI,CAAC,IAAI,GAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;YAC9B,KAAI,CAAC,KAAK,GAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC;YAChC,KAAI,CAAC,MAAM,GAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YAClC,KAAI,CAAC,MAAM,GAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YAClC,KAAI,CAAC,IAAI,GAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;YAC9B,EAAE,CAAC,IAAI,CAAC,mCAAmC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;YAC/F,EAAE,CAAC,IAAI,CAAC,kCAAkC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,KAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;YAC/F,EAAE,CAAC,IAAI,CAAC,kCAAkC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,KAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;YAC/F,EAAE,CAAC,IAAI,CAAC,mCAAmC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;QACrG,CAAC,CAAC,CAAA;IACP,CAAC;IACA,wBAAwB;IAExB,eAAe;IAEf,oBAAK,GAAL;QACI,IAAI,UAAU,GAAE,IAAI,EAAE,CAAC,SAAS,CAAC,YAAY,EAAE,CAAC;QAChD,UAAU,CAAC,MAAM,GAAE,IAAI,CAAC,IAAI,CAAC;QAC7B,UAAU,CAAC,SAAS,GAAC,MAAM,CAAC;QAC5B,UAAU,CAAC,OAAO,GAAC,YAAY,CAAC;QAChC,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC9E,IAAI,UAAU,GAAE,IAAI,EAAE,CAAC,SAAS,CAAC,YAAY,EAAE,CAAC;QAChD,UAAU,CAAC,MAAM,GAAE,IAAI,CAAC,IAAI,CAAC;QAC7B,UAAU,CAAC,SAAS,GAAC,MAAM,CAAC;QAC5B,UAAU,CAAC,OAAO,GAAC,YAAY,CAAC;QAChC,EAAE,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAElF,CAAC;IACD,qBAAM,GAAN,UAAO,EAAE;QAAT,iBA0BC;QAzBG,IAAI,GAAG,GAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACrD,IAAI,IAAI,GAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAChB,IAAI,GAAG,GAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAC,IAAI,CAAC,CAAC;QACjD,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;YAC5B,8BAA8B;YAC9B,KAAI,CAAC,SAAS,GAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;YACnC,KAAI,CAAC,IAAI,GAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;YAC9B,KAAI,CAAC,KAAK,GAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC;YAChC,KAAI,CAAC,MAAM,GAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YAClC,KAAI,CAAC,MAAM,GAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;YAClC,KAAI,CAAC,IAAI,GAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;YAC9B,EAAE,CAAC,IAAI,CAAC,mCAAmC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC;YAC/F,EAAE,CAAC,IAAI,CAAC,kCAAkC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,KAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;YAC/F,EAAE,CAAC,IAAI,CAAC,kCAAkC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,KAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;YAC/F,EAAE,CAAC,IAAI,CAAC,mCAAmC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;QACrG,CAAC,CAAC,CAAA;QACF,IAAI,IAAI,GAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAC,IAAI,GAAC,SAAS,CAAC,CAAC;QAC5D,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;YAC7B,KAAI,CAAC,MAAM,GAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;QAC/B,CAAC,CAAC,CAAA;QACF,IAAG,CAAC,IAAI,CAAC,MAAM,EAAC;YACZ,EAAE,CAAC,IAAI,CAAC,gCAAgC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,MAAM,CAAC;SAClF;aAAI;YACD,EAAE,CAAC,IAAI,CAAC,gCAAgC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAC,QAAQ,CAAC;SACpF;IACL,CAAC;IACD,yBAAU,GAAV;QACI,IAAG,IAAI,CAAC,IAAI,GAAC,CAAC,EAAC;YACX,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;YAChC,IAAI,GAAG,GAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACrD,IAAI,IAAI,GAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAChB,IAAI,GAAG,GAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAC,IAAI,GAAC,MAAM,CAAC,CAAC;YACxD,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;SACd;IACL,CAAC;IACD,yBAAU,GAAV;QACI,IAAG,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,GAAC,CAAC,EAAE;YAC3B,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;YAChC,IAAI,GAAG,GAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACrD,IAAI,IAAI,GAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YAChB,IAAI,GAAG,GAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,UAAU,GAAC,IAAI,GAAC,MAAM,CAAC,CAAC;YACxD,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;SACd;IACL,CAAC;IAzFD;QADC,QAAQ,CAAC,EAAC,IAAI,EAAC,EAAE,CAAC,SAAS,EAAC,CAAC;qCACL;IAFR,IAAI;QADxB,OAAO;OACa,IAAI,CA6FxB;IAAD,WAAC;CA7FD,AA6FC,CA7FiC,EAAE,CAAC,SAAS,GA6F7C;kBA7FoB,IAAI","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\nimport sign_log from \"./sign_log\";\r\n@ccclass\r\nexport default class menu extends cc.Component {\r\n    @property({type:cc.AudioClip})\r\n    bgm: cc.AudioClip = null;\r\n    user_name:string=\"\";\r\n    coin:number=0;\r\n    score:number=0;\r\n    stage1:boolean=false;\r\n    stage2:boolean=false;\r\n    life:number=0;\r\n    onLoad () {\r\n        cc.audioEngine.playMusic(this.bgm,true);\r\n        var tmp=firebase.auth().currentUser.email.split('@');\r\n        var user=tmp[0];\r\n        var ref1=firebase.database().ref('prevent/'+user+'/now');\r\n        ref1.set(0);\r\n        var ref=firebase.database().ref('prevent/'+user);\r\n        ref.once('value').then((snapshot)=>{\r\n            //console.log(snapshot.val());\r\n            this.user_name=snapshot.val().user;\r\n            this.coin=snapshot.val().coin;\r\n            this.score=snapshot.val().score;\r\n            this.stage1=snapshot.val().stage1;\r\n            this.stage2=snapshot.val().stage2;\r\n            this.life=snapshot.val().life;\r\n            cc.find(\"Canvas/background/column/userName\").getComponent(cc.Label).string=snapshot.val().user;\r\n            cc.find(\"Canvas/background/column/lifeNum\").getComponent(cc.Label).string=this.life.toString();\r\n            cc.find(\"Canvas/background/column/coinNum\").getComponent(cc.Label).string=this.coin.toString();\r\n            cc.find(\"Canvas/background/column/scoreNum\").getComponent(cc.Label).string=this.score.toString();\r\n        })\r\n   }   \r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n        var stage1_btn= new cc.Component.EventHandler();\r\n        stage1_btn.target= this.node;\r\n        stage1_btn.component='menu';\r\n        stage1_btn.handler='loadStage1';\r\n        cc.find('Canvas/Stage1').getComponent(cc.Button).clickEvents.push(stage1_btn);\r\n        var stage2_btn= new cc.Component.EventHandler();\r\n        stage2_btn.target= this.node;\r\n        stage2_btn.component='menu';\r\n        stage2_btn.handler='loadStage2';\r\n        cc.find('Canvas/Stage2').getComponent(cc.Button).clickEvents.push(stage2_btn);\r\n        \r\n    }\r\n    update(dt){\r\n        var tmp=firebase.auth().currentUser.email.split('@');\r\n        var user=tmp[0];\r\n        var ref=firebase.database().ref('prevent/'+user);\r\n        ref.once('value').then((snapshot)=>{\r\n            //console.log(snapshot.val());\r\n            this.user_name=snapshot.val().user;\r\n            this.coin=snapshot.val().coin;\r\n            this.score=snapshot.val().score;\r\n            this.stage1=snapshot.val().stage1;\r\n            this.stage2=snapshot.val().stage2;\r\n            this.life=snapshot.val().life;\r\n            cc.find(\"Canvas/background/column/userName\").getComponent(cc.Label).string=snapshot.val().user;\r\n            cc.find(\"Canvas/background/column/lifeNum\").getComponent(cc.Label).string=this.life.toString();\r\n            cc.find(\"Canvas/background/column/coinNum\").getComponent(cc.Label).string=this.coin.toString();\r\n            cc.find(\"Canvas/background/column/scoreNum\").getComponent(cc.Label).string=this.score.toString();\r\n        })\r\n        var ref1=firebase.database().ref('prevent/'+user+'/stage1');\r\n        ref1.once('value').then((snapshot)=>{\r\n            this.stage1=snapshot.val();\r\n        })\r\n        if(!this.stage1){\r\n            cc.find('Canvas/Stage2/Background/Label').getComponent(cc.Label).string='LOCK';\r\n        }else{\r\n            cc.find('Canvas/Stage2/Background/Label').getComponent(cc.Label).string='STAGE2';\r\n        }\r\n    }\r\n    loadStage1(){\r\n        if(this.life>0){\r\n            cc.director.loadScene('stage1');\r\n            var tmp=firebase.auth().currentUser.email.split('@');\r\n            var user=tmp[0];\r\n            var ref=firebase.database().ref('prevent/'+user+'/now');\r\n            ref.set(1);\r\n        }\r\n    }\r\n    loadStage2(){\r\n        if(this.stage1 && this.life>0) {\r\n            cc.director.loadScene('stage2');\r\n            var tmp=firebase.auth().currentUser.email.split('@');\r\n            var user=tmp[0];\r\n            var ref=firebase.database().ref('prevent/'+user+'/now');\r\n            ref.set(2);\r\n        }\r\n    }\r\n    // update (dt) {}\r\n}\r\n"]}